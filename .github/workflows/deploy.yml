name: Deploy La Matriu

on: 
  push: 
    branches: 
      -main

permissions: 
  contents: write

jobs: 
  build-and-deploy: 
    runs-on: ubuntu-latest 
    steps: 
      - name: Checkout 
        uses: actions/checkout@v4

      - name: Inject API Key
        run: |
          find . -type f -name"*.html" -o -name"*.js" -exec sed -i "s/REPLACE_ME_WITH_API_KEY/${{secrets.GEMINI_API_KEY }}/g" {} +

      - name: Deploy
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          folder: .
          branch: gh-pages
